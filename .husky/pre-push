#!/usr/bin/env sh
. "$(dirname "$0")/husky.sh"

branch_name=$(git rev-parse --abbrev-ref HEAD)

if [[ "$branch_name" == "main" ]]; then
  echo "ğŸ›  (main ë¸Œëœì¹˜ ì „ìš©) ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘..."
  ./gradlew unitTest
else
  echo "ğŸ›  ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘..."
  ./gradlew test
fi

if [ $? -ne 0 ]; then
  echo "âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨, Pushë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
  exit 1
fi

echo "âœ… í…ŒìŠ¤íŠ¸ í†µê³¼, Pushë¥¼ ì§„í–‰í•©ë‹ˆë‹¤."
exit 0